<h2>{{scenarioCtrl.currentScenario['details']['name']}}</h2>

<br>
<div class="row">
	<table>
		<tr>
			<th>ScenarioID</th>
			<th>{{"# " + scenarioCtrl.currentScenario['id']}}</th>
		</tr><tr>
			<th>ScenarioName</th>
			<th>{{scenarioCtrl.currentScenario['details']['name']}}</th>
		</tr><tr>
			<th>Amount of Instances&nbsp;&nbsp;</th>
            <th>{{scenarioCtrl.currentScenario['instances']['ids'].length}}</th>

		</tr>
	</table>
	<div class="pull-right">
		<input ng-model="searchText" placeholder="SearchTerm">
		<a type="button" data-toggle="modal" data-target="#createInstance" class="btn btn-default">
					Start Instance
		</a>
        <div ng-hide="scenarioCtrl.currentScenario['instances']['ids'].length">
            <a type="button" data-toggle="modal" data-target="#deleteScenario" class="btn btn-danger">
                <i class="fa fa-trash-o"></i>Delete Scenario
            </a>
        </div>
	</div>
</div>
<hr><br>
<div class="row">
	<div class="table-responsive" ng-controller="ScenarioInstanceController as instanceCtrl">
		<table class="table table-striped table-hover">		
			<thead>
				<tr>
					<th>Instance #</th>
					<th>Process name</th>
				</tr>
			</thead>
			<tbody>
				<tr style="cursor: pointer" ng-repeat="(key, value) in instanceCtrl.scenario['instances']['labels'] track by $index"  ng-show="!searchText || value.indexOf(searchText) > -1" ng-click="instanceCtrl.goToDetailsFrom(key);" >
					<td>{{key}}</td>
					<td>{{value}}</td>
				</tr>
                <div ng-hide="instanceCtrl.scenario['instances']['labels'].length">No items found</div>
				</a>
			</tbody>
		</table>
	</div>
</div>

<!-- modals -->
<div id="createInstance" class="modal fade">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Start instance?</h4>
			</div>
			<div class="modal-body">
				<p>Do you really want to start a new instance of scenario "{{scenarioCtrl.currentScenario['details']['name']}}"?</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" ng-click="scenarioCtrl.createInstance(scenarioCtrl.currentScenario['id']);" data-dismiss="modal" class="btn btn-primary">Start Instance</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div id="deleteScenario" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">delete Scenario?</h4>
            </div>
            <div class="modal-body">
                <p>Do you really want to delete the scenario "{{scenarioCtrl.currentScenario['details']['name']}}"?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" ng-click="scenarioCtrl.deleteScenario(scenarioCtrl.currentScenario['id']);" data-dismiss="modal" class="btn btn-danger">Delete Scenario</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->